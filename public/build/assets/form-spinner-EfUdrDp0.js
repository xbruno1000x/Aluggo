function v(l={}){const{selector:c="form[data-spinner]",buttonSelector:p='button[type="submit"]',textClass:d="btn-text",spinnerClass:o="spinner-border",preventMultipleSubmits:b=!0}=l;document.querySelectorAll(c).forEach(e=>{if(e.dataset.__spinnerInit)return;e.dataset.__spinnerInit="1";const a=e.dataset.spinnerButton;let t=null;if(a?t=document.getElementById(a):t=e.querySelector(p),!t)return;const i=t.querySelector(`.${d}`),r=t.querySelector(`.${o}`);if(!i||!r){console.warn("[FormSpinner] BotÃ£o deve conter elementos com classes:",d,o);return}const n=()=>{t.disabled=!1,i.classList.remove("d-none"),r.classList.add("d-none")},m=s=>{if(e.hasAttribute("data-confirm")&&!s.__fromConfirm)return;if(b&&t.disabled){s.preventDefault();return}if(!e.checkValidity())return;t.disabled=!0,i.classList.add("d-none"),r.classList.remove("d-none");const u=parseInt(e.dataset.spinnerTimeout||"0",10);u>0&&setTimeout(n,u)};e.addEventListener("submit",m),e.addEventListener("invalid",n,!0),window.addEventListener("pageshow",s=>{s.persisted&&n()}),e.querySelector(".is-invalid")&&n()})}document.addEventListener("DOMContentLoaded",()=>{v()});
